# 启动文档

只需要启动 `/Users/yichangting/Desktop/vue-vben-admin/apps/web-ele` 这一前端子项目即可进入开发环境。下面按顺序说明。

## 1. 环境准备
- Node.js ≥ 20.10（推荐用 `nvm`）：  
  ```bash
  nvm install 20
  nvm use 20
  ```
- pnpm ≥ 9.12：`corepack enable && corepack prepare pnpm@10.10.0 --activate`
- 确保可以访问内网接口 `http://192.168.0.101:8080`，前端会通过 `/api` 代理到该地址。

## 2. 代码与依赖
```bash
git clone git@github.com:vbenjs/vue-vben-admin.git
cd /Users/yichangting/Desktop/vue-vben-admin
nvm use 20
corepack enable
pnpm install
```
安装完成后，进入目标子项目路径：`/Users/yichangting/Desktop/vue-vben-admin/apps/web-ele`。

## 3. 启动方式
在项目根目录（或任意路径）执行以下命令，最终都会启动 `apps/web-ele`：

```bash
# 推荐：根目录一键启动（首次选择 @vben/web-ele）
pnpm run dev

# 或直接指定子项目
pnpm run dev:ele

# 或进入子项目目录执行
cd /Users/yichangting/Desktop/vue-vben-admin/apps/web-ele
pnpm run dev
```
控制台出现
```
VITE v6.x ready in ...
➜  Local: http://localhost:5777/
```
即表示 `apps/web-ele` 已经启动。

## 4. 验证
- 浏览器访问 `http://localhost:5777/control/device-editor` 或其他业务路由。
- 也可以用 curl 检查代理是否畅通：
  ```bash
  curl -s 'http://localhost:5777/api/jx-device/registerTable/list?deviceId=25&registerModuleIndex=7&pageSize=0' | jq '.rows | length'
  ```

## 5. 构建 / 预览
```bash
# 子项目构建
pnpm -C /Users/yichangting/Desktop/vue-vben-admin/apps/web-ele run build

# 子项目预览（默认 4173）
pnpm -C /Users/yichangting/Desktop/vue-vben-admin/apps/web-ele run preview
```
如果需要整个仓库打包，可在根目录执行 `pnpm run build`。

## 6. 常见问题
- **Missing script: serve**：仓库没有 `serve` 脚本，使用 `pnpm run dev` 或 `pnpm run preview`。
- **端口占用**：默认监听 5777，可在 `apps/web-ele/vite.config.mts` 修改或使用 `lsof -i :5777` 查询占用进程。
- **Node 版本报错**：出现 “needs Node >=20” 或 ESM 错误时，重新执行 `nvm use 20`。
- **代理不可用**：确认 `http://192.168.0.101:8080` 是否可连，如果需要其他后端，可调整 `vite.config.mts` 中的 proxy 配置。

照此步骤即可独立启动 `/Users/yichangting/Desktop/vue-vben-admin/apps/web-ele` 前端，无需其它服务。
